function Deque(a){if(this._capacity=getCapacity(a),this._length=0,this._front=0,isArray(a)){for(var b=a.length,c=0;c<b;++c)this[c]=a[c];this._length=b}}Deque.prototype.toArray=function(){for(var a=this._length,b=Array(a),c=this._front,d=this._capacity,e=0;e<a;++e)b[e]=this[c+e&d-1];return b},Deque.prototype.push=function(a){var b=arguments.length,c=this._length;if(1<b){var d=this._capacity;if(c+b>d){for(var e=0;e<b;++e){this._checkCapacity(c+1);var f=this._front+c&this._capacity-1;this[f]=arguments[e],c++,this._length=c}return c}for(var f=this._front,e=0;e<b;++e)this[f+c&d-1]=arguments[e],f++;return this._length=c+b,c+b}if(0===b)return c;this._checkCapacity(c+1);var e=this._front+c&this._capacity-1;return this[e]=a,this._length=c+1,c+1},Deque.prototype.pop=function(){var a=this._length;if(0!==a){var b=this._front+a-1&this._capacity-1,c=this[b];return this[b]=void 0,this._length=a-1,c}},Deque.prototype.shift=function(){var a=this._length;if(0!==a){var b=this._front,c=this[b];return this[b]=void 0,this._front=b+1&this._capacity-1,this._length=a-1,c}},Deque.prototype.unshift=function(a){var b=this._length,c=arguments.length;if(1<c){var d=this._capacity;if(b+c>d){for(var e=c-1;0<=e;e--){this._checkCapacity(b+1);var d=this._capacity,f=(this._front-1&d-1^d)-d;this[f]=arguments[e],b++,this._length=b,this._front=f}return b}for(var f,g=this._front,e=c-1;0<=e;e--)f=(g-1&d-1^d)-d,this[f]=arguments[e],g=f;return this._front=g,this._length=b+c,b+c}if(0===c)return b;this._checkCapacity(b+1);var d=this._capacity,e=(this._front-1&d-1^d)-d;return this[e]=a,this._length=b+1,this._front=e,b+1},Deque.prototype.peekBack=function(){var a=this._length;if(0!==a){var b=this._front+a-1&this._capacity-1;return this[b]}},Deque.prototype.peekFront=function(){return 0===this._length?void 0:this[this._front]},Deque.prototype.get=function(a){var b=a;if(b===(0|b)){var c=this._length;return 0>b&&(b+=c),0>b||b>=c?void 0:this[this._front+b&this._capacity-1]}},Deque.prototype.isEmpty=function(){return 0===this._length},Deque.prototype.clear=function(){for(var a=this._length,b=this._front,c=this._capacity,d=0;d<a;++d)this[b+d&c-1]=void 0;this._length=0,this._front=0},Deque.prototype.toString=function(){return this.toArray().toString()},Deque.prototype.valueOf=Deque.prototype.toString,Deque.prototype.removeFront=Deque.prototype.shift,Deque.prototype.removeBack=Deque.prototype.pop,Deque.prototype.insertFront=Deque.prototype.unshift,Deque.prototype.insertBack=Deque.prototype.push,Deque.prototype.enqueue=Deque.prototype.push,Deque.prototype.dequeue=Deque.prototype.shift,Deque.prototype.toJSON=Deque.prototype.toArray,Object.defineProperty(Deque.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),Deque.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(getCapacity(1.5*this._capacity+16))},Deque.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,d=this._length;if(c+d>b){arrayMove(this,0,this,b,c+d&b-1)}};var isArray=Array.isArray;function arrayMove(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function pow2AtLeast(a){return a>>>=0,--a,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a+1}function getCapacity(a){if("number"!=typeof a)if(isArray(a))a=a.length;else return 16;return pow2AtLeast(Math.min(Math.max(16,a),1073741824))}
